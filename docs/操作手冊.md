# ğŸ“š ebook2audiobook + Qwen3-TTS ä¸­æ–‡æ“ä½œæ‰‹å†Š

## ç›®éŒ„

- [ç°¡ä»‹](#ç°¡ä»‹)
- [ç’°å¢ƒæº–å‚™](#ç’°å¢ƒæº–å‚™)
- [å®‰è£æ­¥é©Ÿ](#å®‰è£æ­¥é©Ÿ)
- [ä½¿ç”¨æ–¹å¼](#ä½¿ç”¨æ–¹å¼)
- [Qwen3-TTS é¸é …èªªæ˜](#qwen3-tts-é¸é …èªªæ˜)
- [ç¯„ä¾‹å‘½ä»¤](#ç¯„ä¾‹å‘½ä»¤)
- [å¸¸è¦‹å•é¡Œ](#å¸¸è¦‹å•é¡Œ)
- [ç›¸é—œé€£çµ](#ç›¸é—œé€£çµ)

---

## ç°¡ä»‹

### ä»€éº¼æ˜¯ ebook2audiobookï¼Ÿ

`ebook2audiobook` æ˜¯ä¸€å€‹é–‹æºå·¥å…·ï¼Œå¯ä»¥å°‡é›»å­æ›¸è½‰æ›æˆé«˜å“è³ªçš„æœ‰è²æ›¸ã€‚æ”¯æ´å¤šç¨®æ–‡å­—è½‰èªéŸ³ï¼ˆTTSï¼‰å¼•æ“ï¼Œè®“ä½¿ç”¨è€…èƒ½å¤ è¼•é¬†åœ°å°‡æ–‡å­—å…§å®¹è½‰æ›ç‚ºéŸ³é »æª”æ¡ˆã€‚

### ä»€éº¼æ˜¯ Qwen3-TTSï¼Ÿ

Qwen3-TTS æ˜¯é˜¿é‡Œå·´å·´é›²ç«¯æ™ºæ…§åœ˜éšŠé–‹ç™¼çš„æœ€æ–°ä¸€ä»£æ–‡å­—è½‰èªéŸ³æ¨¡å‹ã€‚å…·æœ‰ä»¥ä¸‹ç‰¹è‰²ï¼š

| ç‰¹è‰² | èªªæ˜ |
|------|------|
| **é«˜å“è³ªèªéŸ³** | æ¡ç”¨å…ˆé€²çš„ç¥ç¶“ç¶²è·¯æ¶æ§‹ï¼Œè¼¸å‡ºè‡ªç„¶æµæš¢çš„èªéŸ³ |
| **å¤šèªè¨€æ”¯æ´** | æ”¯æ´ 10 ç¨®èªè¨€ï¼ŒåŒ…æ‹¬ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥æ–‡ã€éŸ“æ–‡ç­‰ |
| **èªéŸ³å…‹éš†** | åƒ…éœ€ 3 ç§’é˜çš„åƒè€ƒéŸ³é »å³å¯è¤‡è£½ç‰¹å®šéŸ³è‰² |
| **èªéŸ³è¨­è¨ˆ** | å¯é€éè‡ªç„¶èªè¨€æè¿°ä¾†å‰µé€ ç¨ç‰¹çš„èªéŸ³é¢¨æ ¼ |
| **ä½å»¶é²** | é¦–å€‹éŸ³é »å°åŒ…å»¶é²åƒ…éœ€ç´„ 97 æ¯«ç§’ |
| **ä¸²æµç”Ÿæˆ** | æ”¯æ´ä¸²æµè¼¸å‡ºï¼Œé‚Šç”Ÿæˆé‚Šæ’­æ”¾ |

### ç‚ºä»€éº¼é¸æ“‡ Qwen3-TTSï¼Ÿ

1. **é–‹æºå…è²»** - å…è²»ç”¨æ–¼å€‹äººå’Œå•†æ¥­ç”¨é€”
2. **æœ¬åœ°é‹è¡Œ** - ç„¡éœ€é€£ç¶²å³å¯ä½¿ç”¨ï¼Œä¿è­·éš±ç§
3. **é«˜å“è³ªè¼¸å‡º** - èªéŸ³å“è³ªå¯åª²ç¾å°ˆæ¥­é…éŸ³
4. **è³‡æºæ•ˆç‡** - æä¾›ä¸åŒè¦æ¨¡çš„æ¨¡å‹ï¼Œé©é…å„ç¨®ç¡¬é«”é…ç½®

---

## ç’°å¢ƒæº–å‚™

### ç³»çµ±éœ€æ±‚

#### æœ€ä½éœ€æ±‚ï¼ˆå¯é‹è¡Œä½†è¼ƒæ…¢ï¼‰

| é …ç›® | éœ€æ±‚ |
|------|------|
| ä½œæ¥­ç³»çµ± | Windows 10+/Linux/macOS |
| RAM | 4 GB |
| VRAM | 4 GBï¼ˆä½¿ç”¨ GPUï¼‰ |
| Python | 3.10 - 3.12 |
| ç¡¬ç¢Ÿç©ºé–“ | 10 GB |

#### å»ºè­°é…ç½®ï¼ˆæµæš¢é«”é©—ï¼‰

| é …ç›® | éœ€æ±‚ |
|------|------|
| ä½œæ¥­ç³»çµ± | Windows 11/Ubuntu 22.04/macOS 14+ |
| RAM | 16 GB |
| VRAM | 8 GB ä»¥ä¸Š |
| Python | 3.12 |
| ç¡¬ç¢Ÿç©ºé–“ | 20 GB SSD |

### å¿…è¦è»Ÿé«”

#### 1. Python 3.12

```bash
# Windows ä¸‹è¼‰
# https://www.python.org/downloads/

# é©—è­‰å®‰è£
python --version
# æ‡‰é¡¯ç¤º Python 3.12.x
```

#### 2. Git

```bash
# Windows/Linux/Mac å®‰è£
# https://git-scm.com/downloads

# é©—è­‰å®‰è£
git --version
```

#### 3. FFmpegï¼ˆå»ºè­°å®‰è£ï¼‰

```bash
# Windows (ä½¿ç”¨ Chocolatey)
choco install ffmpeg

# Windows (æ‰‹å‹•)
# ä¸‹è¼‰ç¶²å€: https://ffmpeg.org/download.html

# Linux (Ubuntu/Debian)
sudo apt update && sudo apt install ffmpeg

# macOS (ä½¿ç”¨ Homebrew)
brew install ffmpeg

# é©—è­‰å®‰è£
ffmpeg -version
```

#### 4. SoXï¼ˆå»ºè­°å®‰è™Ÿï¼‰

```bash
# Windows (ä½¿ç”¨ Chocolatey)
choco install sox

# Linux (Ubuntu/Debian)
sudo apt install sox

# macOS (ä½¿ç”¨ Homebrew)
brew install sox

# é©—è­‰å®‰è£
sox --version
```

---

## å®‰è£æ­¥é©Ÿ

### æ­¥é©Ÿ 1ï¼šä¸‹è¼‰å°ˆæ¡ˆ

#### æ–¹æ³•ä¸€ï¼šä½¿ç”¨å·²æ•´åˆçš„ç‰ˆæœ¬ï¼ˆæ¨è–¦ï¼‰

æ­¤ç‰ˆæœ¬å·²æ•´åˆ Qwen3-TTSï¼Œç›´æ¥å…‹éš†å³å¯ä½¿ç”¨ï¼š

```bash
# å…‹éš†å°ˆæ¡ˆ
git clone https://github.com/Felix771222/ebook2audiobook.git
cd ebook2audiobook
```

#### æ–¹æ³•äºŒï¼šå¾åŸç‰ˆæ•´åˆ

è‹¥æ‚¨å·²å®‰è£åŸç‰ˆ `ebook2audiobook`ï¼Œå¯æ‰‹å‹•æ•´åˆï¼š

```bash
# å…‹éš†åŸç‰ˆ
git clone https://github.com/DrewThomasson/ebook2audiobook.git
cd ebook2audiobook

# è¤‡è£½æ•´åˆæª”æ¡ˆ
cp -r /path/to/Felix771222/ebook2audiobook/lib/classes/tts_engines/qwen3.py lib/classes/tts_engines/
cp -r /path/to/Felix771222/ebook2audiobook/lib/classes/tts_engines/presets/qwen3_presets.py lib/classes/tts_engines/presets/
```

### æ­¥é©Ÿ 2ï¼šå»ºç«‹è™›æ“¬ç’°å¢ƒ

å»ºç«‹ç¨ç«‹çš„ Python ç’°å¢ƒï¼Œé¿å…èˆ‡ç³»çµ±å…¶ä»–å°ˆæ¡ˆè¡çªï¼š

#### Windows

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
python -m venv python_env

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
python_env\Scripts\activate

# å‡ç´š pip
python -m pip install --upgrade pip
```

#### Linux / macOS

```bash
# å»ºç«‹è™›æ“¬ç’°å¢ƒ
python3 -m venv python_env

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
source python_env/bin/activate

# å‡ç´š pip
python -m pip install --upgrade pip
```

### æ­¥é©Ÿ 3ï¼šå®‰è£ä¾è³´

#### è‡ªå‹•å®‰è£ï¼ˆæ¨è–¦ï¼‰

```bash
# Windows - åŸ·è¡Œå®‰è£è…³æœ¬
.\ebook2audiobook.cmd

# Linux/Mac - åŸ·è¡Œå®‰è£è…³æœ¬
./ebook2audiobook.command
```

#### æ‰‹å‹•å®‰è£

```bash
# å®‰è£ä¸»è¦ä¾è³´
pip install -r requirements.txt

# å®‰è£ Qwen3-TTS ç›¸é—œä¾è³´
pip install qwen-tts soundfile

# ä¿®æ­£ transformers ç‰ˆæœ¬è¡çªï¼ˆé‡è¦ï¼ï¼‰
pip install transformers==4.57.3

# å®‰è£ Rustï¼ˆç·¨è­¯å·¥å…·ï¼‰
rustup install stable
```

#### é¡å¤–ä¾è³´ï¼ˆå»ºè­°ï¼‰

```bash
# è‹¥éœ€è¦ FlashAttentionï¼ˆåŠ é€Ÿ GPU æ¨ç†ï¼‰
pip install -U flash-attn --no-build-isolation
```

### æ­¥é©Ÿ 4ï¼šé©—è­‰å®‰è£

```bash
# æŸ¥çœ‹å¹«åŠ©è¨Šæ¯
python app.py --help

# é æœŸè¼¸å‡ºï¼š
# usage: app.py [-h] [--session SESSION] [--share] [--headless] [--ebook EBOOK]
#               [--ebooks_dir EBOOKS_DIR] [--language LANGUAGE] [--voice VOICE]
#               [--device {CPU,CUDA,MPS,ROCM,XPU,JETSON}]
#               [--tts_engine {XTTSv2,BARK,TORTOISE,VITS,FAIRSEQ,TACOTRON2,YOURTTS,QWEN3,...}]
#               ...
```

---

## ä½¿ç”¨æ–¹å¼

### æ–¹æ³•ä¸€ï¼šåœ–å½¢ä»‹é¢ï¼ˆæ¨è–¦æ–°æ‰‹ï¼‰

#### å•Ÿå‹• GUI

```bash
# Windows
.\ebook2audiobook.cmd

# Linux/Mac
./ebook2audiobook.command
```

#### GUI æ“ä½œæ­¥é©Ÿ

1. **é–‹å•Ÿç€è¦½å™¨**
   - è‡ªå‹•é–‹å•Ÿ `http://localhost:7860`
   - æˆ–æ‰‹å‹•è¼¸å…¥ç¶²å€

2. **ä¸Šå‚³é›»å­æ›¸**
   - é»æ“Šã€ŒUploadã€æŒ‰éˆ•
   - é¸æ“‡é›»å­æ›¸æª”æ¡ˆ
   - æ”¯æ´æ ¼å¼ï¼š`.epub`ã€`.mobi`ã€`.pdf`ã€`.txt`ã€`.azw3` ç­‰

3. **é¸æ“‡ Qwen3-TTS å¼•æ“**
   - æ‰¾åˆ°ã€ŒTTS Engineã€ä¸‹æ‹‰é¸å–®
   - é¸æ“‡ `QWEN3`

4. **é¸æ“‡æ¨¡å‹**
   - å±•é–‹ã€ŒFine-tuned Modelã€é¸å–®
   - é¸æ“‡é©åˆçš„æ¨¡å‹ç‰ˆæœ¬

5. **é¸æ“‡èªè¨€**
   - åœ¨ã€ŒLanguageã€ä¸­é¸æ“‡ç›®æ¨™èªè¨€

6. **è¨­å®šè¼¸å‡ºæ ¼å¼**
   - é¸æ“‡è¼¸å‡ºæ ¼å¼ï¼š`m4b`ï¼ˆæ¨è–¦ï¼‰ã€`mp3`ã€`wav`

7. **é–‹å§‹è½‰æ›**
   - é»æ“Šã€ŒConvert to Audiobookã€æŒ‰éˆ•
   - ç­‰å¾…è½‰æ›å®Œæˆ
   - ä¸‹è¼‰ç”Ÿæˆçš„æœ‰è²æ›¸

### æ–¹æ³•äºŒï¼šå‘½ä»¤åˆ—æ¨¡å¼ï¼ˆé€²éšç”¨æˆ¶ï¼‰

å‘½ä»¤åˆ—æ¨¡å¼é©åˆæ‰¹æ¬¡è™•ç†æˆ–ä¼ºæœå™¨ç’°å¢ƒä½¿ç”¨ã€‚

#### åŸºæœ¬èªæ³•

```bash
# Windows
.\ebook2audiobook.cmd --headless --é¸é …...

# Linux/Mac
./ebook2audiobook.command --headless --é¸é …...
```

#### å¿…è¦åƒæ•¸

| åƒæ•¸ | èªªæ˜ | ç¯„ä¾‹ |
|------|------|------|
| `--headless` | ä»¥ç„¡é ­æ¨¡å¼åŸ·è¡Œ | å¿…å¡« |
| `--ebook` | è¼¸å…¥é›»å­æ›¸è·¯å¾‘ | `--ebook "C:\books\test.epub"` |
| `--tts_engine` | TTS å¼•æ“ | `--tts_engine QWEN3` |
| `--language` | èªè¨€ä»£ç¢¼ | `--language eng` |

---

## Qwen3-TTS é¸é …èªªæ˜

### å¯ç”¨èªéŸ³æ¨¡å‹

#### 1. CustomVoice ç³»åˆ—ï¼ˆè‡ªå®šç¾©èªéŸ³ï¼‰

| æ¨¡å‹åç¨± | åƒæ•¸è¦æ¨¡ | èªªæ˜ |
|---------|---------|------|
| `Qwen3-TTS-12Hz-1.7B-CustomVoice` | 1.7B | é«˜å“è³ªï¼Œ9 ç¨®é è¨­éŸ³è‰² |
| `Qwen3-TTS-12Hz-0.6B-CustomVoice` | 0.6B | è¼•é‡ç‰ˆï¼Œ2 ç¨®é è¨­éŸ³è‰² |

#### 2. VoiceDesign ç³»åˆ—ï¼ˆèªéŸ³è¨­è¨ˆï¼‰

| æ¨¡å‹åç¨± | åƒæ•¸è¦æ¨¡ | èªªæ˜ |
|---------|---------|------|
| `Qwen3-TTS-12Hz-1.7B-VoiceDesign` | 1.7B | è‡ªç„¶èªè¨€èªéŸ³è¨­è¨ˆ |

#### 3. Base ç³»åˆ—ï¼ˆèªéŸ³å…‹éš†ï¼‰

| æ¨¡å‹åç¨± | åƒæ•¸è¦æ¨¡ | èªªæ˜ |
|---------|---------|------|
| `Qwen3-TTS-12Hz-1.7B-Base` | 1.7B | 3 ç§’å¿«é€ŸèªéŸ³å…‹éš† |
| `Qwen3-TTS-12Hz-0.6B-Base` | 0.6B | è¼•é‡ç‰ˆèªéŸ³å…‹éš† |

### å¯ç”¨èªéŸ³æ¸…å–®

#### ä¸­æ–‡èªéŸ³

| èªéŸ³ ID | èªéŸ³åç¨± | æè¿° | é©åˆå ´æ™¯ |
|--------|---------|------|---------|
| `Vivian` | Vivian | æ˜äº®ã€ç•¥å¾®ä¿çš®çš„å¹´è¼•å¥³è² | æ•˜è¿°ã€æ–°è |
| `Serena` | Serena | æº«æŸ”ã€å„ªé›…çš„å¹´è¼•å¥³è² | æ•…äº‹ã€ç«¥è©± |
| `Uncle_Fu` | Uncle Fu | æˆç†Ÿã€ä½æ²‰é†‡åšçš„ç”·è² | æ­·å²ã€å‚³è¨˜ |
| `Dylan` | Dylan | å¹´è¼•æ´»åŠ›çš„åŒ—äº¬å£éŸ³ç”·è² | ç¾ä»£ã€éƒ½å¸‚ |
| `Eric` | Eric | æ´»æ½‘çš„å››å·å£éŸ³ç”·è² | å–œåŠ‡ã€è¼•é¬† |

#### è‹±æ–‡èªéŸ³

| èªéŸ³ ID | èªéŸ³åç¨± | æè¿° | é©åˆå ´æ™¯ |
|--------|---------|------|---------|
| `Ryan` | Ryan | å‹•æ„Ÿã€æ¸…æ™°çš„ç”·è² | æ•˜è¿°ã€æ•™å­¸ |
| `Aiden` | Aiden | é™½å…‰ã€è¦ªåˆ‡çš„ç¾åœ‹ç”·è² | æœ‰è²æ›¸ã€è¨ªè«‡ |

#### æ—¥æ–‡èªéŸ³

| èªéŸ³ ID | èªéŸ³åç¨± | æè¿° | é©åˆå ´æ™¯ |
|--------|---------|------|---------|
| `Ono_Anna` | Ono Anna | æ´»æ½‘ã€å¯æ„›çš„æ—¥æœ¬å¥³è² | å‹•æ¼«ã€éŠæˆ² |

#### éŸ“æ–‡èªéŸ³

| èªéŸ³ ID | èªéŸ³åç¨± | æè¿° | é©åˆå ´æ™¯ |
|--------|---------|------|---------|
| `Sohee` | Sohee | æº«æš–ã€æŸ”å’Œçš„éŸ“åœ‹å¥³è² | æˆ²åŠ‡ã€æµªæ¼« |

### æ”¯æ´èªè¨€å°ç…§è¡¨

| ä»£ç¢¼ | èªè¨€ | åç¨± |
|------|------|------|
| `zho` | ä¸­æ–‡ | Chinese |
| `eng` | è‹±æ–‡ | English |
| `jpn` | æ—¥æ–‡ | Japanese |
| `kor` | éŸ“æ–‡ | Korean |
| `deu` | å¾·æ–‡ | German |
| `fra` | æ³•æ–‡ | French |
| `rus` | ä¿„æ–‡ | Russian |
| `por` | è‘¡è„ç‰™æ–‡ | Portuguese |
| `spa` | è¥¿ç­ç‰™æ–‡ | Spanish |
| `ita` | ç¾©å¤§åˆ©æ–‡ | Italian |

### å®Œæ•´å‘½ä»¤åˆ—åƒæ•¸

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "è¼¸å…¥æª”æ¡ˆ.epub" \
    --tts_engine QWEN3 \
    --language [èªè¨€ä»£ç¢¼] \
    --fine_tuned [æ¨¡å‹åç¨±] \
    --voice [èªéŸ³æª”æ¡ˆæˆ–èªéŸ³ID] \
    --device [CPU/CUDA/MPS/ROCM/XPU/JETSON] \
    --output_format [m4b/mp3/wav/flac] \
    --output_dir [è¼¸å‡ºç›®éŒ„]
```

#### åƒæ•¸èªªæ˜

| åƒæ•¸ | èªªæ˜ | é è¨­å€¼ | ç¯„ä¾‹ |
|------|------|-------|------|
| `--ebook` | è¼¸å…¥é›»å­æ›¸è·¯å¾‘ | å¿…å¡« | `--ebook "book.epub"` |
| `--ebooks_dir` | é›»å­æ›¸ç›®éŒ„ | é¸å¡« | `--ebooks_dir "./books"` |
| `--tts_engine` | TTS å¼•æ“ | å¿…å¡« | `--tts_engine QWEN3` |
| `--language` | èªè¨€ä»£ç¢¼ | å¿…å¡« | `--language eng` |
| `--fine_tuned` | æ¨¡å‹ç‰ˆæœ¬ | é è¨­é¸æ“‡ | `--fine_tuned "Qwen3-TTS-12Hz-0.6B-CustomVoice"` |
| `--voice` | èªéŸ³æª”æ¡ˆæˆ– ID | é è¨­èªéŸ³ | `--voice "Ryan"` æˆ– `--voice "voice.wav"` |
| `--device` | é‹ç®—è£ç½® | è‡ªå‹•åµæ¸¬ | `--device CUDA` |
| `--output_format` | è¼¸å‡ºæ ¼å¼ | `m4b` | `--output_format mp3` |
| `--output_dir` | è¼¸å‡ºç›®éŒ„ | è‡ªå‹•ç”Ÿæˆ | `--output_dir "./output"` |
| `--speed` | èªé€Ÿ | 1.0 | `--speed 1.0` |
| `--temperature` | æº«åº¦ | 0.7 | `--temperature 0.7` |
| `--headless` | ç„¡é ­æ¨¡å¼ | é¸å¡« | `--headless` |
| `--share` | ç”¢ç”Ÿå…¬é–‹é€£çµ | é¸å¡« | `--share` |

---

## ç¯„ä¾‹å‘½ä»¤

### ç¯„ä¾‹ 1ï¼šåŸºæœ¬è‹±æ–‡è½‰æ›

å°‡è‹±æ–‡é›»å­æ›¸è½‰æ›ç‚ºæœ‰è²æ›¸ï¼š

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "C:\books\english_novel.epub" \
    --tts_engine QWEN3 \
    --language eng
```

### ç¯„ä¾‹ 2ï¼šé¸æ“‡ç‰¹å®šèªéŸ³

ä½¿ç”¨ Ryan èªéŸ³æœ—è®€è‹±æ–‡å…§å®¹ï¼š

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "C:\books\english_book.epub" \
    --tts_engine QWEN3 \
    --language eng \
    --fine_tuned "Qwen3-TTS-12Hz-1.7B-CustomVoice" \
    --voice Ryan
```

### ç¯„ä¾‹ 3ï¼šä¸­æ–‡è½‰æ›

å°‡ä¸­æ–‡é›»å­æ›¸è½‰æ›ç‚ºæœ‰è²æ›¸ï¼š

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "C:\books\chinese_novel.epub" \
    --tts_engine QWEN3 \
    --language zho \
    --voice Vivian
```

### ç¯„ä¾‹ 4ï¼šèªéŸ³å…‹éš†

ä½¿ç”¨è‡ªå®šç¾©èªéŸ³æ¨£æœ¬é€²è¡ŒèªéŸ³å…‹éš†ï¼š

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "C:\books\my_book.epub" \
    --tts_engine QWEN3 \
    --fine_tuned "Qwen3-TTS-12Hz-1.7B-Base" \
    --voice "C:\voices\my_voice_sample.wav" \
    --language eng
```

### ç¯„ä¾‹ 5ï¼šä½¿ç”¨ GPU åŠ é€Ÿ

åˆ©ç”¨ NVIDIA GPU åŠ é€Ÿè½‰æ›ï¼š

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "C:\books\book.epub" \
    --tts_engine QWEN3 \
    --language eng \
    --device CUDA
```

### ç¯„ä¾‹ 6ï¼šæ‰¹æ¬¡è™•ç†

è½‰æ›ç›®éŒ„ä¸‹æ‰€æœ‰é›»å­æ›¸ï¼š

```bash
.\ebook2audiobook.cmd --headless \
    --ebooks_dir "C:\books\batch" \
    --tts_engine QWEN3 \
    --language eng \
    --output_dir "C:\audiobooks\output"
```

### ç¯„ä¾‹ 7ï¼šè¼¸å‡ºç‚º MP3 æ ¼å¼

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "C:\books\book.epub" \
    --tts_engine QWEN3 \
    --language eng \
    --output_format mp3
```

### ç¯„ä¾‹ 8ï¼šè¼•é‡æ¨¡å‹ï¼ˆVRAM æœ‰é™ï¼‰

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "C:\books\book.epub" \
    --tts_engine QWEN3 \
    --language eng \
    --fine_tuned "Qwen3-TTS-12Hz-0.6B-CustomVoice" \
    --device CPU
```

---

## å¸¸è¦‹å•é¡Œ

### Q1ï¼šVRAM ä¸è¶³æ€éº¼è¾¦ï¼Ÿ

**å•é¡Œ**ï¼šä½¿ç”¨ GPU æ™‚å‡ºç¾è¨˜æ†¶é«”ä¸è¶³éŒ¯èª¤ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```bash
# æ–¹æ¡ˆ 1ï¼šä½¿ç”¨ CPU è€Œé GPU
--device CPU

# æ–¹æ¡ˆ 2ï¼šä½¿ç”¨è¼ƒå°çš„æ¨¡å‹
--fine_tuned "Qwen3-TTS-12Hz-0.6B-CustomVoice"

# æ–¹æ¡ˆ 3ï¼šé™ä½ batch sizeï¼ˆé€²éšï¼‰
# åœ¨è¨­å®šæª”ä¸­èª¿æ•´
```

### Q2ï¼šè½‰æ›é€Ÿåº¦å¾ˆæ…¢ï¼Ÿ

**å•é¡Œ**ï¼šè½‰æ›è€—æ™‚éé•·ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

| æ–¹æ³• | èªªæ˜ |
|------|------|
| ä½¿ç”¨è¼ƒå°æ¨¡å‹ | é¸æ“‡ 0.6B ç‰ˆæœ¬è€Œé 1.7B |
| ä½¿ç”¨ GPU | æ·»åŠ  `--device CUDA` |
| æ¸›å°‘ç« ç¯€ | å…ˆè½‰æ›å°‘é‡ç« ç¯€æ¸¬è©¦ |
| ä½¿ç”¨ SSD | å°‡é›»å­æ›¸æ”¾åœ¨ SSD ç¡¬ç¢Ÿä¸Š |

### Q3ï¼šèªéŸ³è½èµ·ä¾†ä¸è‡ªç„¶ï¼Ÿ

**å•é¡Œ**ï¼šç”ŸæˆèªéŸ³ç¼ºä¹è‡ªç„¶æ„Ÿã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

1. **å˜—è©¦ä¸åŒèªéŸ³** - æ¯å€‹èªéŸ³æœ‰å…¶ç‰¹è‰²
2. **ä½¿ç”¨è¼ƒå¤§æ¨¡å‹** - 1.7B ç‰ˆæœ¬å“è³ªæ›´å¥½
3. **èª¿æ•´åƒæ•¸** - å˜—è©¦ä¸åŒ `temperature` å€¼

```bash
# è¼ƒé«˜ temperature = æ›´å¤šè®ŠåŒ–
--temperature 0.8

# è¼ƒä½ temperature = è¼ƒç©©å®š
--temperature 0.6
```

### Q4ï¼šå¦‚ä½•é€²è¡ŒèªéŸ³å…‹éš†ï¼Ÿ

**å•é¡Œ**ï¼šæƒ³è¦ä½¿ç”¨è‡ªå·±çš„è²éŸ³ã€‚

**æ­¥é©Ÿ**ï¼š

1. æº–å‚™ä¸€æ®µæ¸…æ™°çš„èªéŸ³æ¨£æœ¬ï¼ˆ3-10 ç§’ï¼‰
2. èªéŸ³æ‡‰æ¸…æ™°ã€ç„¡å™ªéŸ³
3. ä½¿ç”¨ Base ç³»åˆ—æ¨¡å‹

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "book.epub" \
    --tts_engine QWEN3 \
    --fine_tuned "Qwen3-TTS-12Hz-1.7B-Base" \
    --voice "my_voice.wav" \
    --language [ç›®æ¨™èªè¨€]
```

### Q5ï¼šè¼¸å‡ºæ ¼å¼æœ‰å“ªäº›ï¼Ÿå¦‚ä½•é¸æ“‡ï¼Ÿ

**èªªæ˜**ï¼š

| æ ¼å¼ | æª”æ¡ˆå¤§å° | å“è³ª | é©ç”¨å ´æ™¯ |
|------|---------|------|---------|
| `m4b` | ä¸­ | é«˜ | è˜‹æœè¨­å‚™ã€æœ‰è²æ›¸ï¼ˆæ¨è–¦ï¼‰ |
| `mp3` | å° | é«˜ | é€šç”¨ç›¸å®¹ |
| `wav` | å¤§ | ç„¡æ | å¾ŒæœŸè™•ç† |
| `flac` | ä¸­ | ç„¡æ | å­˜æª” |

**é¸æ“‡å»ºè­°**ï¼š

- ä¸€èˆ¬ç”¨é€”ï¼š`m4b` æˆ– `mp3`
- è˜‹æœç”¨æˆ¶ï¼š`m4b`
- å°ˆæ¥­ç·¨è¼¯ï¼š`wav` æˆ– `flac`

### Q6ï¼šæ¨¡å‹è¼‰å…¥å¤±æ•—ï¼Ÿ

**å•é¡Œ**ï¼šå‡ºç¾æ¨¡å‹ç›¸é—œéŒ¯èª¤ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```bash
# æª¢æŸ¥ç¶²è·¯é€£ç·š
ping huggingface.co

# æ¸…é™¤å¿«å–é‡æ–°ä¸‹è¼‰
# åˆªé™¤ ~/.cache/huggingface/hub ç›®éŒ„

# ç¢ºèª pip ç‰ˆæœ¬
pip install --upgrade pip

# é‡æ–°å®‰è£ä¾è³´
pip install --upgrade qwen-tts
```

### Q7ï¼šGUI ç„¡æ³•å•Ÿå‹•ï¼Ÿ

**å•é¡Œ**ï¼šç€è¦½å™¨ç„¡æ³•é–‹å•Ÿ GUI ä»‹é¢ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```bash
# æ–¹æ¡ˆ 1ï¼šæ‰‹å‹•é–‹å•Ÿç€è¦½å™¨
# åœ¨ç€è¦½å™¨è¼¸å…¥ http://localhost:7860

# æ–¹æ¡ˆ 2ï¼šç”¢ç”Ÿå…¬é–‹é€£çµ
.\ebook2audiobook.cmd --share

# æ–¹æ¡ˆ 3ï¼šæª¢æŸ¥é˜²ç«ç‰†è¨­å®š
# å…è¨± Python é€šéé˜²ç«ç‰†
```

### Q8ï¼šæ”¯æ´å“ªäº›é›»å­æ›¸æ ¼å¼ï¼Ÿ

| æ ¼å¼ | æ”¯æ´ç‹€æ…‹ | èªªæ˜ |
|------|---------|------|
| `.epub` | âœ… å®Œæ•´æ”¯æ´ | æœ€ä½³æ”¯æ´æ ¼å¼ |
| `.mobi` | âœ… å®Œæ•´æ”¯æ´ | Amazon æ ¼å¼ |
| `.pdf` | âœ… å®Œæ•´æ”¯æ´ | å¯èƒ½éœ€è¦ OCR |
| `.txt` | âœ… å®Œæ•´æ”¯æ´ | ç´”æ–‡å­— |
| `.azw3` | âœ… å®Œæ•´æ”¯æ´ | Kindle æ ¼å¼ |
| `.fb2` | âœ… å®Œæ•´æ”¯æ´ | FictionBook |
| `.djvu` | âš ï¸ å¯¦é©—æ€§ | å¯èƒ½éœ€è¦é¡å¤–è¨­å®š |
| `.chm` | âš ï¸ å¯¦é©—æ€§ | Windows èªªæ˜æª” |

### Q9ï¼šå¦‚ä½•ä¸­æ–·å¾Œç¹¼çºŒè½‰æ›ï¼Ÿ

```bash
# ä½¿ç”¨ session åƒæ•¸æ¢å¾©
.\ebook2audiobook.cmd --headless \
    --ebook "book.epub" \
    --session "session_name"
```

### Q10ï¼šå¦‚ä½•è‡ªå®šç¾©è¼¸å‡ºç›®éŒ„ï¼Ÿ

```bash
.\ebook2audiobook.cmd --headless \
    --ebook "book.epub" \
    --tts_engine QWEN3 \
    --output_dir "D:\audiobooks\my_book"
```

---

## ç–‘é›£æ’è§£é€ŸæŸ¥è¡¨

| éŒ¯èª¤è¨Šæ¯ | å¯èƒ½åŸå›  | è§£æ±ºæ–¹æ¡ˆ |
|---------|---------|---------|
| `ModuleNotFoundError: No module named 'qwen_tts'` | æœªå®‰è£ qwen-tts | `pip install qwen-tts` |
| `CUDA out of memory` | VRAM ä¸è¶³ | ä½¿ç”¨ `--device CPU` |
| `OSError: Could not find module` | FFmpeg æœªå®‰è£ | å®‰è£ FFmpeg |
| `NameError: name 'install_info' is not defined` | ç’°å¢ƒå•é¡Œ | é‡æ–°å»ºç«‹è™›æ“¬ç’°å¢ƒ |
| `KeyError: 'languages'` | é…ç½®éŒ¯èª¤ | æª¢æŸ¥æ¨¡å‹è¨­å®š |
| `RuntimeError: TorchCodec required` | torchaudio ç‰ˆæœ¬å•é¡Œ | `pip install torchcodec` |

---

## æ•ˆèƒ½å„ªåŒ–å»ºè­°

### 1. GPU åŠ é€Ÿ

è‹¥æ‚¨æœ‰ NVIDIA é¡¯ç¤ºå¡å¼·çƒˆå»ºè­°ä½¿ç”¨ GPU åŠ é€Ÿï¼š

```bash
# æª¢æŸ¥ CUDA æ˜¯å¦å¯ç”¨
python -c "import torch; print(torch.cuda.is_available())"

# ä½¿ç”¨ CUDA
--device CUDA
```

### 2. FlashAttention

å®‰è£ FlashAttention å¯å¤§å¹…æå‡æ¨ç†é€Ÿåº¦ï¼š

```bash
pip install -U flash-attn --no-build-isolation
```

### 3. æ¨¡å‹é¸æ“‡ç­–ç•¥

| æƒ…å¢ƒ | æ¨è–¦æ¨¡å‹ |
|------|---------|
| é«˜å“è³ªéœ€æ±‚ | `Qwen3-TTS-12Hz-1.7B-CustomVoice` |
| VRAM < 4GB | `Qwen3-TTS-12Hz-0.6B-CustomVoice` |
| èªéŸ³å…‹éš† | `Qwen3-TTS-12Hz-1.7B-Base` |
| å¿«é€Ÿæ¸¬è©¦ | `Qwen3-TTS-12Hz-0.6B-CustomVoice` |

### 4. æ‰¹æ¬¡è™•ç†

è™•ç†å¤§é‡é›»å­æ›¸æ™‚ï¼š

```bash
# å»ºç«‹é›»å­æ›¸æ¸…å–®
ls ./books/*.epub > book_list.txt

# æ‰¹æ¬¡è½‰æ›
for /f "delims=" %%f in (book_list.txt) do (
    .\ebook2audiobook.cmd --headless --ebook "%%f" --tts_engine QWEN3 --language eng
)
```

---

## é¦–æ¬¡ä½¿ç”¨å¸¸è¦‹å•é¡Œ

### Q1ï¼šç¨‹å¼å¡åœ¨ "Installing missing programs" ä¸å‹•

**å•é¡Œ**ï¼šé¦–æ¬¡åŸ·è¡Œæ™‚å¡åœ¨å®‰è£ä¾è³´çš„æ­¥é©Ÿã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```bash
# 1. å®‰è£ Rustï¼ˆç·¨è­¯å·¥å…·ï¼‰
rustup install stable

# 2. é‡æ–°é–‹ä¸€å€‹æ–°çš„ CMD è¦–çª—å†åŸ·è¡Œ
# ä¸è¦é—œé–‰æ­£åœ¨é‹è¡Œçš„ CMDï¼Œç›´æ¥é–‹æ–°è¦–çª—
```

### Q2ï¼šå‡ºç¾ transformers ç‰ˆæœ¬è¡çªè­¦å‘Š

**å•é¡Œ**ï¼š
```
qwen-tts 0.1.1 requires transformers==4.57.3, but you have transformers 4.57.6 which is incompatible.
```

**è§£æ±ºæ–¹æ¡ˆ**ï¼š

```bash
pip install transformers==4.57.3
```

### Q3ï¼šå‡ºç¾ "KeyError: 'internal'"

**å•é¡Œ**ï¼š`internal` preset ä¸å­˜åœ¨ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼šé€™å€‹å•é¡Œå·²åœ¨æœ€æ–°ç‰ˆæœ¬ä¿®å¾©ã€‚è«‹æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š

```bash
cd C:\Users\felix\ebook2audiobook-qwen3
git pull origin main
```

### Q4ï¼šå‡ºç¾ "'Qwen3TTS' object has no attribute 'create_vtt'"

**å•é¡Œ**ï¼šç¼ºå°‘ create_vtt æ–¹æ³•ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼šé€™å€‹å•é¡Œå·²åœ¨æœ€æ–°ç‰ˆæœ¬ä¿®å¾©ã€‚è«‹æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚

### Q5ï¼šæ¨¡å‹è¼‰å…¥å¾ˆæ…¢

**å•é¡Œ**ï¼šé¦–æ¬¡åŸ·è¡Œæ™‚ "Loading TTS qwen3-internal model" å¾ˆæ…¢ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼šé€™æ˜¯æ­£å¸¸çš„ï¼é¦–æ¬¡éœ€è¦å¾ Hugging Face ä¸‹è¼‰æ¨¡å‹ï¼ˆç´„ 600MB-1.7GBï¼‰ï¼Œè«‹è€å¿ƒç­‰å¾…ã€‚ä¸‹è¼‰å®Œæˆå¾Œæœƒå¿«å–åˆ°æœ¬åœ°ï¼Œä¸‹æ¬¡åŸ·è¡Œæœƒå¿«å¾ˆå¤šã€‚

### Q6ï¼šå‡ºç¾ "NameError: name 'torch' is not defined"

**å•é¡Œ**ï¼štorch æ¨¡çµ„æœªæ­£ç¢ºåŒ¯å…¥ã€‚

**è§£æ±ºæ–¹æ¡ˆ**ï¼šé€™å€‹å•é¡Œå·²åœ¨æœ€æ–°ç‰ˆæœ¬ä¿®å¾©ã€‚è«‹æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ã€‚

---

## ç›¸é—œé€£çµ

### å°ˆæ¡ˆç›¸é—œ

| é …ç›® | é€£çµ |
|------|------|
| æœ¬æ•´åˆç‰ˆæœ¬ | https://github.com/Felix771222/ebook2audiobook |
| åŸç‰ˆå°ˆæ¡ˆ | https://github.com/DrewThomasson/ebook2audiobook |
| å•é¡Œå›å ± | https://github.com/Felix771222/ebook2audiobook/issues |

### Qwen3-TTS ç›¸é—œ

| é …ç›® | é€£çµ |
|------|------|
| å®˜æ–¹ GitHub | https://github.com/QwenLM/Qwen3-TTS |
| Hugging Face | https://huggingface.co/collections/Qwen/qwen3-tts |
| æ¨¡å‹åˆ—è¡¨ | https://huggingface.co/Qwen/Qwen3-TTS-12Hz-1.7B-CustomVoice |

### æ–‡ä»¶è³‡æº

| é …ç›® | é€£çµ |
|------|------|
| åŸç‰ˆ README | https://github.com/DrewThomasson/ebook2audiobook/blob/main/README.md |
| Qwen3-TTS è«–æ–‡ | https://arxiv.org/abs/ï¼ˆå¾…è£œï¼‰ |
| Gradio æ–‡ä»¶ | https://gradio.app/docs/ |

---

## æˆæ¬Šè²æ˜

- **ebook2audiobook**: MIT License
- **Qwen3-TTS**: Qwen License

---

## æ›´æ–°æ—¥èªŒ

| ç‰ˆæœ¬ | æ—¥æœŸ | è®Šæ›´ |
|------|------|------|
| v1.0.1 | 2026-02-11 | ä¿®å¾© Qwen3-TTS æ•´åˆå•é¡Œ |
| v1.0 | 2026-02-11 | åˆç‰ˆç™¼å¸ƒ |

---

**ğŸ‰ ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼**

è‹¥æœ‰å•é¡Œï¼Œæ­¡è¿è‡³ GitHub Issues å›å ±ã€‚

